# 资源压力测试工具

这是一个现代化的资源压力测试工具，专为Windows系统优化设计。

## 主要功能

### 🎯 智能资源管理
- **CPU压力测试**：支持1-95%精确控制，多进程/多线程动态调节
- **内存压力测试**：智能内存分配，支持MB和百分比双重控制
- **实时监控**：系统资源实时显示，智能保护机制
- **定时调度**：支持多时段自动化测试计划

### 🖥️ 现代化界面
- 直观的图形用户界面
- 实时数据可视化
- 详细的系统信息展示
- 完整的日志记录功能

### 🛡️ 安全特性
- 系统过载保护
- 智能负载调节
- 内存泄漏防护
- 异常恢复机制

## 核心组件

### CPU压力测试工具 (`cpu_stress_tool.py`)
- 动态调整CPU使用率到目标值
- 峰值保护：当CPU使用率超过设定峰值时自动降低负载
- 多进程+多线程混合模式，突破GIL限制
- 快速响应（0.1秒检测间隔）

### 内存压力测试工具 (`memory_stress_tool.py`)
- 动态调整内存使用率到目标值
- 峰值保护：当内存使用率超过设定峰值时自动释放内存
- 批量内存分配和释放，减少CPU影响
- 智能垃圾回收管理

### 工具启动器 (`launch_tools.py`)
- 单独启动CPU或内存压力测试工具
- 同时启动两个工具
- 实时监控工具运行状态
- 统一停止所有工具

## 使用方法

### 方法一：使用启动器（推荐）
```bash
python launch_tools.py
```

在启动器界面中：
- 点击"CPU压力测试工具"启动CPU管理工具
- 点击"内存压力测试工具"启动内存管理工具
- 点击"同时启动两个工具"同时启动两个工具
- 使用"停止所有工具"统一管理

### 方法二：直接启动单个工具

**启动CPU压力测试工具：**
```bash
python cpu_stress_tool.py
```

**启动内存压力测试工具：**
```bash
python memory_stress_tool.py
```

## 配置说明

### CPU压力测试工具配置
- **目标CPU使用率**：期望达到的CPU使用率（10-90%）
- **CPU峰值限制**：CPU使用率的上限保护值（20-100%）
- **线程数**：CPU工作线程数量（1-32个）

### 内存压力测试工具配置
- **目标内存使用率**：期望达到的内存使用率（20-90%）
- **内存峰值限制**：内存使用率的上限保护值（30-95%）
- **内存块大小**：每个内存块的大小（1-100MB）

## 工作原理

### CPU管理算法
1. **多进程+多线程**：使用多进程突破Python GIL限制，提升CPU利用率
2. **动态强度调整**：根据当前CPU使用率动态调整工作强度
3. **快速响应**：0.1秒检测间隔，快速响应CPU变化
4. **分级调整**：根据超出程度采用不同的调整策略

### 内存管理算法
1. **批量处理**：内存分配和释放采用批量处理，减少CPU影响
2. **目标值计算**：目标值设为峰值的90%，确保有足够缓冲
3. **随机数据**：使用随机数据填充内存块，防止系统压缩
4. **智能释放**：根据内存压力采用不同的释放策略

## 优势特点

### 1. 资源隔离
- CPU和内存管理完全独立
- 避免资源竞争和冲突
- 可以单独测试特定资源

### 2. 精确控制
- CPU工具专注于CPU管理，响应更快
- 内存工具专注于内存管理，更精确
- 独立的峰值保护机制

### 3. 易于使用
- 统一的启动器界面
- 独立运行，互不干扰
- 清晰的状态监控

### 4. 灵活部署
- 可以在不同机器上运行
- 支持分布式压力测试
- 便于集成到自动化测试中

## 日志文件

每个工具都会生成独立的日志文件：
- `cpu_stress_test.log` - CPU压力测试日志
- `memory_stress_test.log` - 内存压力测试日志

## 注意事项

1. **系统资源**：请根据系统配置合理设置目标值和峰值
2. **同时运行**：同时运行两个工具时，注意总体系统负载
3. **峰值设置**：建议峰值不要设置过高，留出系统缓冲空间
4. **长时间运行**：长时间运行时注意监控系统温度和稳定性

## 系统要求

- Python 3.6+
- psutil库
- tkinter（通常随Python安装）
- 支持Windows、macOS、Linux

## 安装依赖

```bash
pip install psutil
```

## 故障排除

### 常见问题

1. **工具无法启动**
   - 检查Python版本和依赖
   - 确认文件权限
   - 查看错误日志

2. **CPU使用率不准确**
   - 检查系统负载
   - 调整线程数量
   - 确认多进程支持

3. **内存分配失败**
   - 检查可用内存
   - 降低内存块大小
   - 检查系统内存限制

4. **工具意外退出**
   - 查看日志文件
   - 检查系统资源
   - 降低压力测试强度

## 技术支持

如果遇到问题，请：
1. 查看相应的日志文件
2. 检查系统资源使用情况
3. 确认配置参数合理性
4. 尝试降低压力测试强度